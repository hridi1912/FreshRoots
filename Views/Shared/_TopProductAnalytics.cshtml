@model List<FreshRoots.ViewModels.TopProductViewModel>

<div class="container-fluid">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-chart-line me-2"></i>Sales Analytics</h2>
        <button onclick="loadDashboard()" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-1"></i> Back to Dashboard
        </button>
    </div>

    <!-- Analytics Content -->
    <div class="analytics-content">
        @if (Model != null && Model.Any())
        {
            <div class="row">
                @foreach (var item in Model)
                {
                    @if (item?.Product != null)
                    {
                        <div class="col-md-6 col-lg-3 mb-4">
                            <div class="card h-100">
                                <img src="@(item.Product.ImageUrl ?? "/images/default.png")"
                                     class="card-img-top"
                                     alt="@item.Product.Name"
                                     style="height: 200px; object-fit: cover;">
                                <div class="card-body">
                                    <h5 class="card-title">@item.Product.Name</h5>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="text-muted">
                                            <i class="fas fa-shopping-cart me-1"></i>
                                            @item.TotalSold sold
                                        </span>
                                        <span class="text-success fw-bold">
                                            <i class="fas fa-dollar-sign me-1"></i>
                                            @item.TotalRevenue.ToString("N2")
                                        </span>
                                    </div>
                                    <div class="progress" style="height: 8px;">
                                        @{
                                            var maxSold = Model.Max(x => x.TotalSold);
                                            var percentage = maxSold > 0 ? (item.TotalSold * 100) / maxSold : 0;
                                        }
                                        <div class="progress-bar bg-success"
                                             style="width: @percentage%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        }
        else
        {
            <div class="text-center py-5">
                <i class="fas fa-chart-pie fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No Sales Data Yet</h4>
                <p class="text-muted">Your sales analytics will appear here once you start receiving orders.</p>
            </div>
        }
    </div>
</div>